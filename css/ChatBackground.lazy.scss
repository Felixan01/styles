@mixin bubble {
	background: rgba(0, 0, 0, 0.3) !important;
	color: #fff !important;
	border-radius: 15px !important;
}

._im_peer_history_w[chat_style]:not([chat_style='']) {
	.im-mess_srv .im-mess--text,
	._im_bar_date > span,
	.vkn-alt-sticker .vkn-alt-time,
	.vkn-alt-sticker-reply .vkn-alt-time,
	.im-mess--actions:hover,
	.im-mess:hover .im-mess--actions,
	.im-page--history-new-bar > span,
	.im-activity {
		@include bubble;
	}

	.vkn-alt-sticker,
	.vkn-alt-sticker-reply {
		.vkn-alt-time {
			padding: 0 5px !important;

			._im_mess_link {
				color: #fff !important;
			}
		}
	}

	.im-mess--actions {
		margin-left: 3px;

		& > span {
			color: #fff !important;
		}
	}

	.im-page--history-new-bar {
		margin: 5px 0 !important;
		background: none;

		&::before,
		&::after {
			background: none;
		}
	}

	.im-mess-stack_fwd .im-mess-stack--pname > .im-mess-stack--lnk {
		background: none !important;
		color: var(--accent) !important;
		border-radius: 0 !important;
		box-shadow: none !important;
	}

	._im_bar_date {
		background: none !important;

		& > span {
			background: radial-gradient(rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.3)) !important;
			box-shadow: -10px 0 0 rgba(0, 0, 0, 0.3), 10px 0 0 rgba(0, 0, 0, 0.3);
		}
	}

	.im-activity {
		padding: 5px 10px 5px 35px;

		.im-activity--icon .pr_bt {
			background: white !important;
		}

		._im_typing_name {
			color: white !important;
		}
	}

	.im-mess_srv {
		text-align: center;

		.im-mess--text {
			@include bubble;
			padding: 5px 10px;
			display: inline-block;
		}
	}

	.im-mess .im-mess--text .im_srv_lnk {
		color: #fff !important;
	}
}
